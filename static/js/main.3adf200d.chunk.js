(this.webpackJsonpxchange=this.webpackJsonpxchange||[]).push([[0],{1043:function(e,t,n){},1044:function(e,t,n){},1045:function(e,t,n){},1046:function(e,t,n){},1047:function(e,t,n){},1050:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(76),c=n.n(r),s=(n(508),n(27)),i=n(67),u=n(23),o=n(494),l=n.n(o),p=n(497),d=n(127),b=n(22),m=n(36),j=n.n(m),f=n(156),y=n.n(f),O=n(498),x=n(499),h=n(1057),v=n(1055),g=n(1058),w=n(1056),T=n(1059),k=n(501),C=n(3),N=function(e){var t=e.balance;return Object(C.jsx)("div",{children:Object(C.jsx)(h.a,{bg:"dark",variant:"dark",expand:"lg",children:Object(C.jsxs)(v.a,{fluid:!0,children:[Object(C.jsx)(h.a.Brand,{href:"#",children:"XChange"}),Object(C.jsx)(h.a.Toggle,{"aria-controls":"navbarScroll"}),Object(C.jsxs)(h.a.Collapse,{id:"navbarScroll",children:[Object(C.jsxs)(g.a,{className:"me-auto my-2 my-lg-0",style:{maxHeight:"100px"},navbarScrollx:!0,children:[Object(C.jsx)(g.a.Link,{children:Object(C.jsx)(d.b,{style:{textDecoration:"none"},to:"/",children:"Home"})}),Object(C.jsx)(g.a.Link,{children:Object(C.jsx)(d.b,{style:{textDecoration:"none"},to:"/new",children:"New"})}),Object(C.jsx)(g.a.Link,{children:Object(C.jsx)(d.b,{style:{textDecoration:"none"},to:"/traders",children:"Traders"})})]}),Object(C.jsxs)(w.a,{variant:"dark",children:[t," cUSD"]}),Object(C.jsxs)(T.a,{className:"d-flex",children:[Object(C.jsx)(k.a,{type:"search",placeholder:"Search",className:"me-2","aria-label":"Search"}),Object(C.jsx)(w.a,{variant:"outline-success",children:"Search"})]})]})]})})})},S=(n(1043),function(e){var t=e.items,n=e.userAddress,a=e.buyItem;return Object(C.jsx)("div",{className:"main",children:null===t||void 0===t?void 0:t.map((function(e){return Object(C.jsxs)("div",{className:"item-card",children:[Object(C.jsxs)("div",{className:"card-price",children:["$",j()(e.price).shiftedBy(-18).toString()]}),Object(C.jsx)("img",{className:"card-img",src:e.imageUrl,alt:e.name}),Object(C.jsxs)("div",{className:"item-details",children:[Object(C.jsx)(y.a,{diameter:40,seed:Object(f.jsNumberForAddress)(e.owner)}),Object(C.jsx)("div",{className:"item-details-address",children:e.owner})]}),Object(C.jsx)("div",{className:"card-description",children:e.description}),n!==e.owner&&Object(C.jsx)("div",{className:"buy",onClick:function(){return a(e.index,e.price)},children:"Buy"}),Object(C.jsx)("div",{})]})}))})}),I=n(24),M=n(6),_=(n(1044),function(e){var t=e.traders,n=e.tradersArr,r=e.identicon,c=e.rateTrader,s=Object(a.useState)(5),i=Object(u.a)(s,2),o=(i[0],i[1],Object(a.useState)()),l=Object(u.a)(o,2),p=l[0],d=l[1];return Object(a.useEffect)((function(){n.forEach((function(e){d((function(t){return Object(M.a)(Object(M.a)({},t),{},Object(I.a)({},e,5))}))}))}),[]),Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("div",{className:"trader",children:[Object(C.jsx)("div",{className:"trader-title",children:"Traders"}),t.map((function(e,t){return Object(C.jsxs)("div",{className:"trader-card",children:[Object(C.jsx)("div",{className:"trader-icon",children:r(e.trader)}),Object(C.jsxs)("div",{className:"trader-details",children:[Object(C.jsxs)("div",{children:["Sold: ",e.sold]}),Object(C.jsxs)("div",{children:["Rating: ",e.rating/e.rateCount||0]})]}),Object(C.jsxs)("div",{className:"trader-rate",children:[Object(C.jsx)("input",{name:"rate-".concat(t),type:"number",style:{outline:"none"},min:1,max:5,defaultValue:5,onChange:function(t){return function(e,t){d((function(n){return Object(M.a)(Object(M.a)({},n),{},Object(I.a)({},t,e))}))}(t.target.value,e.trader)}}),Object(C.jsx)("div",{className:"rate-button",onClick:function(){return function(e){var t=p[e];c(e,t)}(e.trader)},children:"Rate"})]})]})}))]})})}),F=(n(1045),function(e){var t=e.createItem,n=Object(a.useState)(),r=Object(u.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(),o=Object(u.a)(i,2),l=o[0],p=o[1],d=Object(a.useState)(),m=Object(u.a)(d,2),j=m[0],f=m[1],y=Object(a.useState)(),O=Object(u.a)(y,2),x=O[0],h=O[1],v=Object(b.f)();return Object(C.jsx)("div",{className:"form-new",children:Object(C.jsx)("div",{className:"form-form",children:Object(C.jsxs)(T.a,{onSubmit:function(e){return function(e){e.preventDefault(),t(c,j,l,x)}(e)},children:[Object(C.jsxs)(T.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(C.jsx)(T.a.Label,{children:"Item Name"}),Object(C.jsx)(T.a.Control,{type:"text",onChange:function(e){return s(e.target.value)}})]}),Object(C.jsxs)(T.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput2",children:[Object(C.jsx)(T.a.Label,{children:"Image URL"}),Object(C.jsx)(T.a.Control,{type:"text",onChange:function(e){return f(e.target.value)}})]}),Object(C.jsxs)(T.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea3",children:[Object(C.jsx)(T.a.Label,{children:"Item Description"}),Object(C.jsx)(T.a.Control,{as:"textarea",rows:3,onChange:function(e){return p(e.target.value)}})]}),Object(C.jsxs)(T.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput4",children:[Object(C.jsx)(T.a.Label,{children:"Price"}),Object(C.jsx)(T.a.Control,{type:"number",onChange:function(e){return h(e.target.value)}})]}),Object(C.jsx)(w.a,{variant:"dark",type:"button",onClick:function(){return v("/")},children:"Close"}),Object(C.jsx)(w.a,{variant:"dark",type:"submit",children:"Submit"})]})})})}),E=(n(1046),n(1047),"0xD76504526Cf6D6B7cC91e9F1BbE339DA78F47cc3");var A=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),o=Object(u.a)(c,2),m=o[0],h=o[1],v=Object(a.useState)(),g=Object(u.a)(v,2),w=g[0],T=g[1],k=Object(a.useState)(),I=Object(u.a)(k,2),M=I[0],A=I[1],D=Object(a.useState)(0),B=Object(u.a)(D,2),L=B[0],U=B[1],P=Object(a.useState)(),G=Object(u.a)(P,2),J=G[0],R=G[1],H=Object(a.useState)(),Y=Object(u.a)(H,2),K=Y[0],V=Y[1];Object(a.useEffect)((function(){X()}),[]),Object(a.useEffect)((function(){n&&J&&$()}),[n,J]),Object(a.useEffect)((function(){K&&(q(),Z())}),[K]);var W=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new n.web3.eth.Contract(x,"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1"),e.next=3,a.methods.approve(E,t).send({from:n.defaultAccount});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t,n,a,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.celo){e.next=20;break}return e.prev=1,e.next=4,window.celo.enable();case 4:return t=new l.a(window.celo),n=Object(p.newKitFromWeb3)(t),e.next=8,n.web3.eth.getAccounts();case 8:a=e.sent,c=a[0],n.defaultAccount=c,r(n),R(c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0);case 18:e.next=21;break;case 20:alert("You need to install the celo wallet extension in order to use this app");case 21:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t,a,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getTotalBalance(J);case 3:t=e.sent,a=t.cUSD.shiftedBy(-18).toFixed(2),r=new n.web3.eth.Contract(O,E),U(a),V(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t,n,a,r,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.methods.itemCounter().call();case 3:t=e.sent,n=[],a=Object(s.a)().mark((function e(t){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(i.a)(Object(s.a)().mark((function e(n){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.methods.getItem(t).call();case 2:a=e.sent,n({index:t,owner:a[0],name:a[1],imageUrl:a[2],description:a[3],price:a[4],sold:a[5]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:a=e.sent,n.push(a);case 4:case"end":return e.stop()}}),e)})),r=0;case 7:if(!(r<t)){e.next=12;break}return e.delegateYield(a(r),"t0",9);case 9:r++,e.next=7;break;case 12:return e.next=14,Promise.all(n);case 14:c=e.sent,console.log(c.length),h(c),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(0),console.log("Error loading items: "+e.t1);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t,n,a,r){var c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=new j.a(r).shiftedBy(18).toString(),e.next=4,K.methods.createItem(t,n,a,c).send({from:J});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error creating item: "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Q=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t,n){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(J),e.prev=1,e.next=4,W(n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("Error while approving payment: "+e.t0);case 9:return e.prev=9,e.next=12,K.methods.buyItem(t).send({from:J});case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(9),console.log("Error while calling buyItem(): "+e.t1);case 17:case"end":return e.stop()}}),e,null,[[1,6],[9,14]])})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.methods.getMarketTraders().call();case 3:return t=e.sent,A(t),e.next=7,Promise.all(t.map(function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.methods.getTrader(t).call();case 2:return n=e.sent,e.abrupt("return",{trader:n.trader,sold:n.sold,rating:n.rating,rateCount:n.rateCount});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:n=e.sent,T(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error getting traders: "+e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t,n){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.methods.rateTrader(t,n).send({from:J});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error while rating traders: "+e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(C.jsx)("div",{className:"App",children:Object(C.jsxs)(d.a,{children:[Object(C.jsx)(N,{balance:L}),Object(C.jsxs)(b.c,{children:[Object(C.jsx)(b.a,{path:"/",element:Object(C.jsx)(S,{items:m,userAddress:J,buyItem:Q})}),Object(C.jsx)(b.a,{path:"/new",element:Object(C.jsx)(F,{createItem:z})}),Object(C.jsx)(b.a,{path:"/traders",element:Object(C.jsx)(_,{traders:w,identicon:function(e){return Object(C.jsx)(y.a,{diameter:50,seed:Object(f.jsNumberForAddress)(e)})},tradersArr:M,rateTrader:ee})})]})]})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1060)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};n(1048);c.a.render(Object(C.jsx)(A,{}),document.getElementById("root")),D()},498:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"buyItem","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_imageUrl","type":"string"},{"internalType":"string","name":"_description","type":"string"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"createItem","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getItem","outputs":[{"internalType":"address payable","name":"owner","type":"address"},{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"imageUrl","type":"string"},{"internalType":"string","name":"description","type":"string"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"bool","name":"sold","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMarketTraders","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_trader","type":"address"}],"name":"getTrader","outputs":[{"internalType":"address payable","name":"trader","type":"address"},{"internalType":"uint256","name":"sold","type":"uint256"},{"internalType":"uint256","name":"rating","type":"uint256"},{"internalType":"uint256","name":"rateCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isTrader","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"itemCounter","outputs":[{"internalType":"uint256","name":"_value","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"marketTraders","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_trader","type":"address"},{"internalType":"uint256","name":"_rating","type":"uint256"}],"name":"rateTrader","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},499:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},508:function(e,t,n){},523:function(e,t){},526:function(e,t){},530:function(e,t){},531:function(e,t){},556:function(e,t){},558:function(e,t){},572:function(e,t){},574:function(e,t){},588:function(e,t){},607:function(e,t){},609:function(e,t){},621:function(e,t){},628:function(e,t){},629:function(e,t){},631:function(e,t){},638:function(e,t){},645:function(e,t){},653:function(e,t){},660:function(e,t){},706:function(e,t){},736:function(e,t){},742:function(e,t){},743:function(e,t){},763:function(e,t){},770:function(e,t){},777:function(e,t){},857:function(e,t){},872:function(e,t){},901:function(e,t){}},[[1050,1,2]]]);
//# sourceMappingURL=main.3adf200d.chunk.js.map